---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# noromod

<!-- badges: start -->
[![R-CMD-check](https://github.com/pratikunterwegs/noromod/actions/workflows/R-CMD-check.yaml/badge.svg)](https://github.com/pratikunterwegs/noromod/actions/workflows/R-CMD-check.yaml)
<!-- badges: end -->

The goal of noromod is to provide a model of age-stratified norovirus transmission.

## Installation

You can install the development version of noromod from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
pak::pak("pratikunterwegs/noromod")
```

## Example

This is a basic example which shows you how to use the model:

```{r example}
library(noromod)
library(deSolve)
library(epidemics) # an Epiverse package

# assume uniform contacts across seven compartments
polymod <- socialmixr::polymod

uk_pop <- epidemics::population(
  name = "UK population",
  contact_matrix = matrix(1, 4, 4),
  demography_vector = 67e6 * rep(0.25, 4),
  initial_conditions = matrix(
    c(1 - 1e-6, 0, 1e-6, 0, 0, 0, 0),
    nrow = 4, ncol = 7, byrow = TRUE
  )
)

uk_pop

# prepare dummy parameters
params <- default_parameters(uk_pop)

# view parameters
params

# use the R only model
data <- as.data.frame(
  lsoda(
    y = uk_pop$initial_conditions * uk_pop$demography_vector,
    times = seq_len(1100),
    func = norovirus_model_r,
    parms = params
  )
)

head(data)

# use the Rcpp model
data <- as.data.frame(
  lsoda(
    y = uk_pop$initial_conditions * uk_pop$demography_vector,
    times = seq_len(1100),
    func = norovirus_model_cpp,
    parms = params
  )
)

head(data)
```
